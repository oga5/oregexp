# 正規表現リファレンス

## (1) メタキャラクタ

| 記号      | 意味                                   |
|-----------|----------------------------------------|
| `\`      | メタキャラクタのエスケープ             |
| `.`       | 任意の一文字にマッチ                   |
| `^`       | 行の先頭にマッチ                       |
| `$`       | 行の末尾にマッチ                       |
| `*`       | 直前の要素が0回以上繰り返しにマッチ    |
| `+`       | 直前の要素が1回以上繰り返しにマッチ    |
| `?`       | 直前の要素が0回または1回にマッチ       |
| `[...]`   | いずれか1文字にマッチ                  |
| `(...)`   | グループ化                             |
| `|`       | いずれかのパターンにマッチ             |

- `[]` の先頭に `^` を置くと否定

## (2) エスケープシーケンス

| シーケンス         | 意味                                 |
|--------------------|--------------------------------------|
| `\n`              | 改行                                 |
| `\r`              | 復帰                                 |
| `\t`              | タブ                                 |
| `\f`              | 改ページ                             |
| `\xNN`, `\x{NNNN}`| 16進数コードで指定した文字           |
| `\Q ... \E`       | リテラルとして扱う                   |

## (3) 文字クラス

| クラス   | 意味                                      |
|----------|-------------------------------------------|
| `\d`    | 数字 ([0-9])                              |
| `\D`    | 数字以外 ([^0-9])                         |
| `\w`    | 単語構成文字 ([a-zA-Z_0-9])               |
| `\W`    | 単語構成文字以外 ([^a-zA-Z_0-9])          |
| `\s`    | 空白文字 ([ \t\f])                        |
| `\S`    | 空白文字以外 ([^ \t\f])                   |
| `\l`    | 空白文字 + 改行 ([ \t\f\r\n])            |

## (4) 繰り返し指定

- `{n,m}` : n回以上m回以下
- `{n,}`  : n回以上
- `{n}`   : ちょうどn回
- `*`     : 0回以上 (`{0,}` と同じ)
- `+`     : 1回以上 (`{1,}` と同じ)
- `?`     : 0回または1回 (`{0,1}` と同じ)

* `*?` などの「非貪欲」指定や `*+` などの possessive 指定もサポート

## (5) 後方参照

- `\1` : 1番目のグループにマッチした文字列
- `\2`〜`\9` : 2〜9番目のグループ
- `\+` : 最後にマッチしたグループ
- `\&` : マッチ全体
- ``\`` : マッチ直前の文字列
- `\'` : マッチ直後の文字列
- `\g{N}` : N番目のグループ (負数で後方参照)
- `\k<NAME>` : 名前付きグループ参照

## (6) アンカー

- `\b` : 単語境界
- `\B` : 非単語境界
- `\A` : テキストの先頭
- `\z` : テキストの末尾
- `\Z` : テキストの末尾または改行直前
- `\=A` : 範囲の先頭
- `\=z` : 範囲の末尾
- `\=^` : 行頭
- `\=$` : 行末

## (7) 拡張構文

- `(?#text)` : コメント
- `(?:...)` : キャプチャしないグループ
- `(?=...)` : 先読みアサーション
- `(?!...)` : 否定先読みアサーション
- `(?<=...)` : 後読みアサーション
- `(?<!...)` : 否定後読みアサーション
- `(?>...)` : possessive グループ
- `(?<NAME>...)` : 名前付きグループ
- `(?R...)` : 再帰パターン
- `(?PARNO...)` : 再帰パターン (PARNO=0〜9, ?0は?Rと同じ)
- `(?&NAME...)` : 名前付きグループの再帰
- `(?(COND)IFTRUE|IFFALSE)` : 条件分岐
- `(?isS-isS)` : パターン内フラグON/OFF
- `(?isS-isS:...)` : グループ内のみフラグON/OFF
- `\K` : 直前までのマッチを $& から除外

## (8) POSIX文字クラス

- `[:ascii:]` : 0〜127の文字
- `[:upper:]` : [A-Z]
- `[:lower:]` : [a-z]
- `[:alpha:]` : [A-Za-z]
- `[:alnum:]` : [A-Za-z0-9]
- `[:digit:]` : [0-9]

## (9) パターンフラグ

- `i` : 大文字小文字を区別しない
- `s` : . に改行もマッチ
- `S` : \s に改行もマッチ
